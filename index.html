<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>49KB Image ZIP (Odd Number Series)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: Arial, sans-serif;
  background:#eef1f5;
  padding:20px;
}

img{
  position:absolute;
  hoght:200px;
  width:200px;
  top:150px;
  right:350px;
  top-margin:auto;
  box-shadow:0 4px 15px rgba(0,0,0,0,1);
  border-radius:24px;
}

.container {
  max-width:500px;
  background:#fff;
  
  padding:60px;
  margin:60px;
  border-radius:12px;
  box-shadow:0 5px 20px rgba(0,0,0,.1);
}

h2 {
  text-align:center;
  color:#06cc3b;
}
p{
  font-size:25px;
  text-align:center;
  color:#06cc3b;
}

input, button {
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:8px;
  border:1px solid #ccc;
}

button {
  background:#007bff;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}

button:hover {
  background:#0056b3;
}

small {
  display:block;
  margin-top:10px;
  color:#666;
}
footer{ 
  position:absolute;
  hoght:200px;
  width:400px;
  right:500px;
  buttom:350px;
}
.move{position:absolute;
  font-size:30px;
  hoght:300px;
  width:300px;
  right:300px;
  top:400px;

}
</style>
</head>

<body>
<img src="manas.jpeg" alt="logo">

<div class="container">
  <h2>WELCOME</h2>
  <P>SSC_PROJECT</P>
  <input type="file" id="fileInput" accept="image/*">

  <input type="text" id="baseName" placeholder="900003_photo.jpg">

  <input type="number" id="step" value="3" min="1" placeholder="Step (e.g. 3)">

  <input type="number" id="count" value="50" min="1" placeholder="How many photos">

  <button onclick="createZip()">Create ZIP</button>

  <small>
    • type "900003_photo.jpg" in box.<br>
    • Supports all images<br>
    • All uotput images will reduce ,49KB<br>
    • All Output format JPG<br>
  </small>
</div>
<div class="move">
    <p>GO TO: <a href="other.html" rel="otherhtml">Other Project</a></p>
</div>
<footer><small>copy right @2026 | Manas Debnath</small></footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<script>
async function compressImage(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.readAsDataURL(file);

    reader.onload = () => {
      const img = new Image();
      img.src = reader.result;

      img.onload = async () => {
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");

        /* SAFE resize for large images */
        const MAX = 1000;
        let w = img.width;
        let h = img.height;

        if (w > MAX || h > MAX) {
          const scale = Math.min(MAX / w, MAX / h);
          w = Math.floor(w * scale);
          h = Math.floor(h * scale);
        }

        canvas.width = w;
        canvas.height = h;
        ctx.drawImage(img, 0, 0, w, h);

        let quality = 0.8;
        let blob;

        while (quality > 0.05) {
          blob = await new Promise(r =>
            canvas.toBlob(r, "image/jpeg", quality)
          );
          if (blob.size <= 49 * 1024) break;
          quality -= 0.05;
        }

        if (blob.size > 49 * 1024) {
          alert("This image cannot be compressed to 49KB.");
          reject();
          return;
        }

        resolve(blob);
      };

      img.onerror = () => {
        alert("Unsupported image format.");
        reject();
      };
    };
  });
}

async function createZip() {
  const file = fileInput.files[0];
  if (!file) {
    alert("Please select an image");
    return;
  }

  const zip = new JSZip();

  const base = document.getElementById("baseName").value;
  const step = parseInt(document.getElementById("step").value);
  const count = parseInt(document.getElementById("count").value);

  if (!base.match(/\d+/)) {
    alert("Filename must contain a number");
    return;
  }

  const startNum = parseInt(base.match(/\d+/)[0]);
  const suffix = base.replace(startNum, "");

  const compressed = await compressImage(file);

  for (let i = 0; i < count; i++) {
    const num = startNum + (i * step);
    zip.file(num + suffix, compressed);
  }

  const zipBlob = await zip.generateAsync({ type:"blob" });

  const a = document.createElement("a");
  a.href = URL.createObjectURL(zipBlob);
  a.download = "49kb_images_odd_series.zip";
  a.click();
}
</script>

</body>
</html>